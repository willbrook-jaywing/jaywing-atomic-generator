//-------------------------------------------------------
//  Library: Data Helper
//-------------------------------------------------------

var _ = require('lodash');

var _config = require('../../config');
var _DocsDataHelper = require('../../lib/components/DocsDataHelper');
var _PropertyHelper = require('../../lib/components/PropertyHelper');

//-------------------------
//  Private
//-------------------------

//-------------------------
//  Public
//-------------------------

var self = module.exports = {

  extractDataCategoryNames: function (categoriesData) {
    var names = [];
    for(var i = 0; i < categoriesData.length; i++) {
      names.push(categoriesData[i].name);
    }
    return names;
  },

  extractDataSubCategoryNames: function (categoryData) {
    var names = [];
    var subCategories = categoryData.categories;
    for (var i = 0; i < subCategories.length; i++) {
      var subCategory = subCategories[i];
      var name = subCategory.name;
      names.push(name);
    }
    return names;
  },

  extractDataSizeNames: function (sizesData) {
    var names = [];
    for(var i = 0; i < sizesData.length; i++) {
      names.push(sizesData[i].name);
    }
    return names;
  },

  createDataSummaryObj: function (categoryName, subCategoryName, name, description, sizeNames, moduleClassName) {

    var obj = {};

    obj.categoryName = categoryName;
    obj.subCategoryName = subCategoryName;
    obj.name = name;
    obj.description = description;
    obj.cssClassName = _PropertyHelper.getCssClassName(name);
    obj.sizeNames = sizeNames.length > 0 ? sizeNames : 'None';
    obj.sizeCssClassNames = sizeNames.length > 0 ? _PropertyHelper.getSizeCssClassNames(name, sizeNames) : 'N/A';
    obj.moduleClassName = moduleClassName ? moduleClassName : 'None';

    return obj;

  },

  createDataObj: function (categoryName, subCategoryName, name, description, sizeNames, moduleClassName) {

    var obj = {};

    // basic
    obj.categoryName = categoryName;
    obj.subCategoryName = subCategoryName;
    obj.name = name;
    obj.description = description;
    obj.cssClassName = _PropertyHelper.getCssClassName(name);
    obj.sizeNames = sizeNames;
    obj.sizeCssClassNames = sizeNames.length > 0 ? _PropertyHelper.getSizeCssClassNames(name, sizeNames) : null;
    obj.fullCssClassName = _PropertyHelper.getFullCssClassName(name, sizeNames, []);
    obj.moduleClassName = moduleClassName;

    // sass
    obj.sassVarPrefix = _PropertyHelper.getSassVarPrefix(name);
    obj.sassTempColor = _config.components.templates.data.sass.tempColor;
    obj.sassTempBackground = _config.components.templates.data.sass.tempBackground;
    obj.sassTempPadding =_config.components.templates.data.sass.tempPadding;

    // docs
    obj.docsPageId = _DocsDataHelper.getDocsDataPageItemId(name);
    obj.dataModuleAttr = obj.moduleClassName ? ' data-module=\"' + obj.moduleClassName + '\"' : '';
    obj.exampleHtml = '<div class=\"' + obj.fullCssClassName + '\"' + obj.dataModuleAttr + '>\n\n\t\t\t<h4>' + name + '</h4>\n\n\t\t</div>';
    obj.codeHtml = '<div class=\"' + obj.fullCssClassName + '\"' + obj.dataModuleAttr + '>\n\n\t\t\t\t\t<h4>' + name + '</h4>\n\n\t\t\t\t</div>';

    // sass definition
    var sassPath = _config.components.paths.sass;
    sassPath += _PropertyHelper.getCategoryPath(categoryName);
    sassPath += _PropertyHelper.getSubCategoryPath(subCategoryName);
    sassPath += _PropertyHelper.getNamePath(name);
    obj.sassPath = sassPath;

    // sass definition
    obj.sassDefinitionFileName = _PropertyHelper.getSassDefinitionFileName(name);

    // sass sizes
    obj.sizes = [];
    for (var i = 0; i < sizeNames.length; i++) {
      var size = {};
      size.componentName = name;
      size.name = sizeNames[i];
      size.cssClassName = _PropertyHelper.getSizeCssClassName(name, sizeNames[i]);
      size.sassIncludName = _PropertyHelper.getSizeSassIncludeName(sizeNames[i]);
      size.sassFileName = _PropertyHelper.getSassSizeFileName(name, sizeNames[i]);
      obj.sizes.push(size);
    }

    // sass import
    obj.sassImportFileName = _PropertyHelper.getSassImportFileName(name);
    obj.sassImports = '@import \'' + obj.sassDefinitionFileName + '\';\n';
    for (var i = 0; i < obj.sizes.length; i++) {
      obj.sassImports += '@import \'' + obj.sizes[i].sassFileName + '\';\n';
    }

    // module
    obj.modulePath = _config.components.paths.modules;
    obj.moduleFileName = _PropertyHelper.getModuleFileName(name);

    return obj;

  }

};